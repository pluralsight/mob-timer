language: node_js
cache: npm
node_js:
- '10.14'
os:
- windows
- osx
- linux
script:
- npm run test
- if [[ "$TRAVIS_OS_NAME" == "windows" ]]; then npm run build-win; fi
- if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then npm run build-mac; fi
- if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then npm run build-linux; fi
after_script:
- ls -R dist
before_deploy:
- if [[ "$TRAVIS_OS_NAME" == "windows" ]]; then tar -zcf ${TRAVIS_BUILD_DIR}/mob-timer-win32-x64-${TRAVIS_TAG}-${TRAVIS_COMMIT}.tar.gz
  dist/mob-timer-win32-x64; fi
- if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then npm run package-mac; cp ./dist/mob-timer-darwin-x64/mob-timer.dmg
  ${TRAVIS_BUILD_DIR}/mob-timer-darwin-x64-${TRAVIS_TAG}-${TRAVIS_COMMIT}.dmg; fi
- if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then tar -zcf ${TRAVIS_BUILD_DIR}/mob-timer-linux-x64-${TRAVIS_TAG}-${TRAVIS_COMMIT}.tar.gz
  dist/mob-timer-linux-x64; fi
deploy:
  provider: releases
  api_key:
    secure: Msx02xmWOnm0Pofnma6iZlFB/w29pgLnAdT6ji4p5FvIYdZ4o9yqfwpiJARfT2rdVTFUMgNjFp8cOxOe4stmlpl0kpaFZ/NOLZcX7hsiuhD1OAB/YxgZwRxbv9yHCbMm+DtrLZqkuRUZCrG1ECj00cjnJkFGMXIpPM0rBisSMNpsq0Zmz7p0a6UqtwW1BpXZkkdOq7vkO8E/pW75AaIOkHLT4TgzUUawxjS43TrDYZ5QClwO4L46C4MlFMAYJB5u5wZonZ14lPBjlyNAa6ZG0LIf9xZLQHEoZ/NivFFINXdwwIWk3wT46gD7NKoQO0BEw2dOPy3lUoe+oVTUuXxKxNt9n7mLc6Z2vdd1ErfM4l5PFP0/k+Z5/o96UaEAI0KV6NgOt2q8UX2zhGU9+Vq8pxG2EmqtodlyGqbYxmf3txzhpcWA0MFASDj0rV+ujgLl9JrI3TNxMV/8LxXzsO4fv9DWoNNQZVUo1jZrT8xWOfcqwBtNDJ52WtnIccA2MCpqzao8QZitseG/9lNvcGM36lNkZS58S2s2wusxa+6jhKu63wRJqPFzkK+rVsj+NZ/DRdGG5+eNONqG/hDIcnxDsHelja2CDIgP2LijuplFMk/QDY0scD7il2vMZJhnmvl8SIvyCcSiqyTCNMZDMt7f9DLjtgd0kMXh7qrwYF1pCWA=
  file:
  - "${TRAVIS_BUILD_DIR}/mob-timer-win32-x64-${TRAVIS_TAG}-${TRAVIS_COMMIT}.tar.gz"
  - "${TRAVIS_BUILD_DIR}/mob-timer-darwin-x64-${TRAVIS_TAG}-${TRAVIS_COMMIT}.dmg"
  - "${TRAVIS_BUILD_DIR}/mob-timer-linux-x64-${TRAVIS_TAG}-${TRAVIS_COMMIT}.tar.gz"
  skip_cleanup: true
  on:
    tags: true
